import{a as b,S as w,i as l}from"./assets/vendor-CauDeeDU.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();async function L(e,r){const s=`https://pixabay.com/api/?${new URLSearchParams({key:"51145498-f51992c20e23a6f6f425bd97f",q:e,image_type:"photo",orientation:"horizontal",max_width:320,max_height:200,safesearch:"true",per_page:15,page:r})}`;try{const t=await b.get(s);return{hits:t.data.hits,totalHits:t.data.totalHits}}catch(t){return console.error("Ошибка",t),[]}}const v=new w(".gallery a",{caption:!0,captionDelay:250}),S=document.querySelector(".gallery");function p(e){let r="";console.log(e),e==null||e.forEach(o=>{r+=`<li> 
      <a href= "${o.largeImageURL}" class="large-img">
       <img src="${o.webformatURL}" class="small-img" alt="${o.tags}">
       </a>
       <div class="under-image-info">
       <p> <span> Likes </span> <br> ${o.likes} </p>
       <p> <span> Views </span> <br> ${o.views} </p>
       <p> <span> Comments </span> <br> ${o.comments} </p>
       <p> <span> Downloads </span> <br> ${o.downloads} </p>
       </div>

    </li> `}),S.insertAdjacentHTML("beforeend",r),v.refresh()}function O(){const e=document.querySelector(".gallery");e&&(e.innerHTML="")}function q(){const e=document.querySelector(".loader");e&&(e.style.display="block")}function I(){const e=document.querySelector(".loader");e&&(e.style.display="none")}const g=document.querySelector(".js-load-more-btn"),P=()=>g.style.display="block",f=()=>g.style.display="none",d=document.querySelector(".form");let c="",y="",a=1;const i={position:"topRight",timeout:4e3,close:!0,progressBar:!0,icon:"fas fa-check",closeOnClick:!1,pauseOnHover:!0};d.addEventListener("submit",async function(e){if(e.preventDefault(),f(),d.elements["search-text"].value.trim()===""){l.warning({message:"Input value can't be empty!",color:"red",...i});return}c=d.elements["search-text"].value.trim(),y=c,a=1,O();const o=(await h(a)).hits;p(o),o.length>=15&&P()});let m=!1;async function h(e){if(m)return[];m=!0,q();try{const r=await L(c,e);return r.hits.length===0?(l.warning({message:"Sorry, there are no images matching <br> your search query. Please try again!",color:"red",...i}),[]):r}catch(r){return l.error({message:`Oops, something went wrong! ${r}`,color:"red",...i}),[]}finally{I(),m=!1}}const $=document.querySelector(".js-load-more-btn");$.addEventListener("click",async function(){if(y===c){a++;const e=await h(a),r=e.totalHits,o=Math.ceil(r/15);(a>=o||r<15)&&(f(),l.warning({message:"We are sorry, but you've reached the end of search results",color:"red",...i}));const s=e.hits;(s==null?void 0:s.length)>0?(p(s),x()):f()}});function x(){const o=document.querySelector("li").getBoundingClientRect().height*2;window.scrollBy({top:o,behavior:"smooth"})}
//# sourceMappingURL=index.js.map
