{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n//TODO get array img axios API pixabay\nexport default async function getImagesByQuery(query) {\n  const params = new URLSearchParams({\n    key: \"51145498-f51992c20e23a6f6f425bd97f\",\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    max_width: 320,\n    max_height: 200,\n    safesearch: \"true\",\n    per_page: 9,\n  });\n  const url = `https://pixabay.com/api/?${params}`;\n  return await axios\n    .get(url)\n    .then((response) => {\n      return response.data.hits;\n    })\n    .catch((error) => {\n      console.error(\"Ошибка\", error);\n      return [];\n    });\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n//TODO default settings for simplelightbox\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  caption: true,\n  captionDelay: 250,\n});\nconst gallery = document.querySelector(\".gallery\");\n\n//TODO create and add gallery to DOM\nfunction createGallery(images) {\n  let markup = \"\";\n\n  images.forEach((image) => {\n    markup += `<li> \n      <a href= ${image.largeImageURL} class=\"large-img\">\n       <img src=${image.webformatURL} class=\"small-img\" alt=\"${image.tags}\">\n       </a>\n       <div class=\"under-image-info\">\n       <p> <span> Likes </span> <br> ${image.likes} </p>\n       <p> <span> Views </span> <br> ${image.views} </p>\n       <p> <span> Comments </span> <br> ${image.comments} </p>\n       <p> <span> Downloads </span> <br> ${image.downloads} </p>\n       </div>\n\n    </li> `;\n  });\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n  lightbox.refresh();\n}\n//TODO clear gallery through innerHTML\nfunction clearGallery() {\n  const gallery = document.querySelector(\".gallery\"); // или ваш селектор\n  if (gallery) {\n    gallery.innerHTML = \"\";\n  }\n}\n\n//TODO show spinner\nfunction showLoader() {\n  const loader = document.querySelector(\".loader\");\n  if (loader) {\n    loader.style.display = \"block\";\n  }\n}\n//TODO hide spinner\nfunction hideLoader() {\n  const loader = document.querySelector(\".loader\");\n  if (loader) {\n    loader.style.display = \"none\";\n  }\n}\n\nexport { createGallery, clearGallery, showLoader, hideLoader };\n","import getImagesByQuery from \"./js/pixabay-api.js\";\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n} from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst formSubmit = document.querySelector(\".form\");\n\nlet inputValue = \"\";\n\n//TODO create gallery => submit trigger\nformSubmit.addEventListener(\"submit\", async function (e) {\n    e.preventDefault();\n    inputValue = formSubmit.elements[\"search-text\"].value;\n    clearGallery();\n    const images = await getImages();\n    createGallery(images);\n});\n\n//TODO get images by input value, show iziToast messages\nasync function getImages() {\n    const iziToastDefaults = {\n        position: \"topRight\",\n        timeout: 4000,\n        close: true,\n        progressBar: true,\n        icon: \"fas fa-check\",\n        closeOnClick: false,\n        pauseOnHover: true,\n    };\n    try {\n        showLoader();\n        const imagesArr = await getImagesByQuery(inputValue);\n\n        if (imagesArr.length === 0) {\n            iziToast.warning({\n                message:\n                    \"Sorry, there are no images matching <br> your search query. Please try again!\",\n                color: \"red\",\n                ...iziToastDefaults,\n            });\n\n            return [];\n        }\n        return imagesArr;\n    } catch (error) {\n        iziToast.error({\n            message: `Oops, something went wrong! ${error}`,\n            color: \"red\",\n            ...iziToastDefaults,\n        });\n        return [];\n    } finally {\n        hideLoader();\n    }\n}\n"],"names":["getImagesByQuery","query","url","axios","response","error","lightbox","SimpleLightbox","gallery","createGallery","images","markup","image","clearGallery","showLoader","loader","hideLoader","formSubmit","inputValue","getImages","iziToastDefaults","imagesArr","iziToast"],"mappings":"+vBAGe,eAAeA,EAAiBC,EAAO,CAWpD,MAAMC,EAAM,4BAVG,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,UAAW,IACX,WAAY,IACZ,WAAY,OACZ,SAAU,CACd,CAAG,CAC6C,GAC9C,OAAO,MAAME,EACV,IAAID,CAAG,EACP,KAAME,GACEA,EAAS,KAAK,IACtB,EACA,MAAOC,IACN,QAAQ,MAAM,SAAUA,CAAK,EACtB,GACR,CACL,CCpBA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,QAAS,GACT,aAAc,GAChB,CAAC,EACKC,EAAU,SAAS,cAAc,UAAU,EAGjD,SAASC,EAAcC,EAAQ,CAC7B,IAAIC,EAAS,GAEbD,EAAO,QAASE,GAAU,CACxBD,GAAU;AAAA,iBACGC,EAAM,aAAa;AAAA,kBAClBA,EAAM,YAAY,2BAA2BA,EAAM,IAAI;AAAA;AAAA;AAAA,uCAGlCA,EAAM,KAAK;AAAA,uCACXA,EAAM,KAAK;AAAA,0CACRA,EAAM,QAAQ;AAAA,2CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,WAI1D,CAAG,EACDJ,EAAQ,mBAAmB,YAAaG,CAAM,EAE9CL,EAAS,QAAO,CAClB,CAEA,SAASO,GAAe,CACtB,MAAML,EAAU,SAAS,cAAc,UAAU,EAC7CA,IACFA,EAAQ,UAAY,GAExB,CAGA,SAASM,GAAa,CACpB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CA,IACFA,EAAO,MAAM,QAAU,QAE3B,CAEA,SAASC,GAAa,CACpB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,IACFA,EAAO,MAAM,QAAU,OAE3B,CC3CA,MAAME,EAAa,SAAS,cAAc,OAAO,EAEjD,IAAIC,EAAa,GAGjBD,EAAW,iBAAiB,SAAU,eAAgB,EAAG,CACrD,EAAE,eAAc,EAChBC,EAAaD,EAAW,SAAS,aAAa,EAAE,MAChDJ,IACA,MAAMH,EAAS,MAAMS,IACrBV,EAAcC,CAAM,CACxB,CAAC,EAGD,eAAeS,GAAY,CACvB,MAAMC,EAAmB,CACrB,SAAU,WACV,QAAS,IACT,MAAO,GACP,YAAa,GACb,KAAM,eACN,aAAc,GACd,aAAc,EACtB,EACI,GAAI,CACAN,IACA,MAAMO,EAAY,MAAMrB,EAAiBkB,CAAU,EAEnD,OAAIG,EAAU,SAAW,GACrBC,EAAS,QAAQ,CACb,QACI,gFACJ,MAAO,MACP,GAAGF,CACnB,CAAa,EAEM,IAEJC,CACV,OAAQhB,EAAO,CACZ,OAAAiB,EAAS,MAAM,CACX,QAAS,+BAA+BjB,CAAK,GAC7C,MAAO,MACP,GAAGe,CACf,CAAS,EACM,EACf,QAAc,CACNJ,GACH,CACL"}